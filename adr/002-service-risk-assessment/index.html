<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=Lyz><link href=https://lyz-code.github.io/clinv/adr/002-service-risk-assessment/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.3, mkdocs-material-9.1.17"><title>Status - Clinv</title><link rel=stylesheet href=../../assets/stylesheets/main.26e3688c.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ecc896b0.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../css/timeago.css><link rel=stylesheet href=../../assets/_mkdocstrings.css><link rel=stylesheet href=../../stylesheets/extra.css><link rel=stylesheet href=../../stylesheets/links.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=light-blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#status class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=Clinv class="md-header__button md-logo" aria-label=Clinv data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Clinv </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Status </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/lyz-code/clinv title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> lyz-code/clinv </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=Clinv class="md-nav__button md-logo" aria-label=Clinv data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> Clinv </label> <div class=md-nav__source> <a href=https://github.com/lyz-code/clinv title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> lyz-code/clinv </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Clinv </a> </li> <li class=md-nav__item> <a href=../../contributing/ class=md-nav__link> Contributing </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#status class=md-nav__link> Status </a> </li> <li class=md-nav__item> <a href=#context class=md-nav__link> Context </a> </li> <li class=md-nav__item> <a href=#proposals class=md-nav__link> Proposals </a> <nav class=md-nav aria-label=Proposals> <ul class=md-nav__list> <li class=md-nav__item> <a href=#score-types class=md-nav__link> Score types </a> <nav class=md-nav aria-label="Score types"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#risk class=md-nav__link> Risk </a> </li> <li class=md-nav__item> <a href=#protection class=md-nav__link> Protection </a> </li> <li class=md-nav__item> <a href=#security class=md-nav__link> Security </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#how-to-give-values class=md-nav__link> How to give values </a> </li> <li class=md-nav__item> <a href=#how-to-add-new-risk-or-security-measure class=md-nav__link> How to add new risk or security measure </a> </li> <li class=md-nav__item> <a href=#how-to-deal-with-the-change-of-schema class=md-nav__link> How to deal with the change of schema </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#decision class=md-nav__link> Decision </a> </li> <li class=md-nav__item> <a href=#consequences class=md-nav__link> Consequences </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Status</h1> <h2 id=status>Status<a class=headerlink href=#status title="Permanent link">&para;</a></h2> <!-- What is the status? Draft, Proposed, Accepted, Rejected, Deprecated or Superseded?
--> <p>Draft</p> <h2 id=context>Context<a class=headerlink href=#context title="Permanent link">&para;</a></h2> <!-- What is the issue that we're seeing that is motivating this decision or change? --> <p>We start to have enough information in the inventory to give a rough idea of the security measures and risks of the different services, and it would be interesting to have an ordered list of services by some risk level that takes into account this data.</p> <p>The model can always be refined further to better reflect the reality, for example, if a service has different access methods one for admins and other for common users, but we'll start with what we have.</p> <h2 id=proposals>Proposals<a class=headerlink href=#proposals title="Permanent link">&para;</a></h2> <!-- What are the possible solutions to the problem described in the context --> <h3 id=score-types>Score types<a class=headerlink href=#score-types title="Permanent link">&para;</a></h3> <p>Build three scores per service:</p> <ul> <li><code>risk</code>: Measures the danger level of the service, taking into account the value of the information or detected service hazards.</li> <li><code>protection</code>: Measures the level of protection of the service.</li> <li><code>security</code>: Takes into account the above scores to output an overall one.</li> </ul> <h4 id=risk>Risk<a class=headerlink href=#risk title="Permanent link">&para;</a></h4> <p>For the <code>risk</code> we may start with:</p> <ul> <li>The number of <code>Information</code> entities accessed by the service.</li> <li>The number of <code>Service</code>s that depend on the current one.</li> <li>A list of common risks.</li> </ul> <p>In the next iteration, we could give the <code>Information</code> model a <code>risk</code> attribute to refine even further that element.</p> <p>The list of common risks could be a <code>str</code> <code>Enum</code> similar to the <code>NetworkAccess</code> or the <code>AuthenticationMethod</code>.</p> <h4 id=protection>Protection<a class=headerlink href=#protection title="Permanent link">&para;</a></h4> <p>For the <code>protection</code> score we may start with:</p> <ul> <li>A base score given by the <code>NetworkAccess</code> that's big enough to separate the services despite the number of security measures that they've got implemented.</li> <li>A list of common security measures, it could be a <code>str</code> <code>Enum</code> similar to the <code>NetworkAccess</code> or the <code>AuthenticationMethod</code>. Which one of them is the authentication.</li> </ul> <h4 id=security>Security<a class=headerlink href=#security title="Permanent link">&para;</a></h4> <p>A simple subtraction of <code>protection</code> - <code>risk</code> may suffice.</p> <h3 id=how-to-give-values>How to give values<a class=headerlink href=#how-to-give-values title="Permanent link">&para;</a></h3> <p>So far we have based the possible cases of the elements in <code>str Enums</code>, we could use <code>IntEnums</code> but then we'd need to deduce the element name from a transformation from the <code>Enum</code> key, which won't be always the best. For example it would be difficult going from <code>TWOFA_KEY</code> to a user pleasant string.</p> <p>Another option would be to create <code>Entity</code> for each element with something like:</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Risk</span><span class=p>(</span><span class=n>Entity</span><span class=p>):</span>
    <span class=n>id_</span><span class=p>:</span> <span class=n>RiskID</span>
    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span>
    <span class=n>value</span><span class=p>:</span> <span class=nb>int</span>
</code></pre></div> <p>But then we'll need to:</p> <ul> <li>Populate the initial values of the database</li> <li>Change the schema of the services</li> <li>Tweak the <code>services.build_choices</code> to include the schema changes, although it looks easy.</li> </ul> <p>On the other side:</p> <ul> <li>It will be easier for downstream users to define their own network accesses, authenticated methods, security measures...</li> <li>It will be easier to expand the model for example with different access methods for each service.</li> </ul> <h3 id=how-to-add-new-risk-or-security-measure>How to add new risk or security measure<a class=headerlink href=#how-to-add-new-risk-or-security-measure title="Permanent link">&para;</a></h3> <p>We can reuse most of the <code>add</code> cli method, but it would be kind of cool if at the end of the form, it supported the addition of the element to the existing services.</p> <h3 id=how-to-deal-with-the-change-of-schema>How to deal with the change of schema<a class=headerlink href=#how-to-deal-with-the-change-of-schema title="Permanent link">&para;</a></h3> <p>We'll give a script to create the base elements and show a warning in the commit of the database schema and what steps needs to be done.</p> <h2 id=decision>Decision<a class=headerlink href=#decision title="Permanent link">&para;</a></h2> <!-- What is the change that we're proposing and/or doing? --> <ul> <li>Create two new models <code>Risk</code> and <code>SecurityMeasure</code>.</li> <li>Tweak the <code>add</code> entrypoint to accept these two new models.</li> <li>Create a new entrypoint to return an ordered list of services based on the stored information.</li> <li>Create a script to do the initial population of the database.</li> </ul> <h2 id=consequences>Consequences<a class=headerlink href=#consequences title="Permanent link">&para;</a></h2> <!-- What becomes easier or more difficult to do because of this change? --> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2022-05-30T15:15:18+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2022-05-30</span> </small> </div> </article> </div> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.instant", "navigation.footer", "navigation.top", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.b425cdc4.min.js></script> <script src=../../js/timeago.min.js></script> <script src=../../js/timeago_mkdocs_material.js></script> </body> </html>